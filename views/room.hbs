<img src="/images/background.jpg" class="background" alt="">
<h1>Welkom in de Room</h1>
<button onclick='woordCheck(document.getElementById("test1").value.toLowerCase());'>Test</button>

<div id="room_div">
    <div id="chat_wrapper">
        <div id="chat"></div>
        <form id="chat_form">
            <p><textarea id="message"></textarea> <input type="submit" value="verstuur" /></p>
        </form>
    </div>
    <div id="tekenen">
        <button onclick="clearCanvas()">Clear</button>
        <button onclick="eraser()">Eraser</button>
        <hr>
        <button id="bigger" onclick="bigger()">++</button>
        <button id="smaller" onclick="smaller()">--</button>
        <hr>
        <p id="black" class="colorSquare"></p>
        <p id="purple" class="colorSquare"></p>
        <p id="blue" class="colorSquare"></p>
        <p id="orange" class="colorSquare"></p>
        <p id="red" class="colorSquare"></p>
        <p id="yellow" class="colorSquare"></p>
        <p id="green" class="colorSquare"></p>


        <!--Hier wordt de canvas getekend d.m.v. javascript-->
        <div id="canvasDiv"></div>

        <script src="javascripts/color.js"></script>
        <script src="javascripts/canvas.js"></script>
        <script src="javascripts/button.js"></script>
    </div>
</div>
<script src="/socket.io/socket.io.js"></script>
<script>
    var socket = io.connect('http://localhost:4200');
    var userId;
    var roomId = location.search.split('roomid=')[1];

    socket.on('connect', function(data) {
        //id van de client
        userId = socket.io.engine.id;
        //room controleren server sided
        socket.emit('joinRoom', {user: userId, room: roomId});
    });

    socket.on('fullRoom', function () {
        location.href = "/roomScreen";
    });

    socket.on('chat', function (data) {
       $("#chat").append(data + "</br>");
       $('#chat').animate({scrollTop: $(document).height() + $('#chat').height()});
    });

    $("#chat_form").submit(function (e) {
       e.preventDefault();
       //de value uit de textarea halen en kijken of er iets in zit
       var message = $("#message").val();
       if(message.length > 0){
           //chat bericht naar de server sturen
           socket.emit('chatBericht', {message: message, room: roomId, user: userId});
       }
       //textarea weer leeg zetten
        document.getElementById('message').value = "";
    });
    $(window).bind('beforeunload', function(){
        socket.emit('leaveRoom', {user: userId, room: roomId});
    });

</script>